<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Step Questionnaire</title>
    
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="questionnaire.css" rel="stylesheet">
    
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <!-- Link to your JavaScript file -->
    <script src="app.js" defer></script>
    
        <style>
            .hidden {
                display: none;
            }
            .visible {
                display: block;
            }
        </style>
    </head>
    <body>
         <!-- Bootstrap JS and Popper.js and Javascript for interactivity -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="second-updated-question.js"></script>
    <script src="questionnaire.js"></script>
    
        <!-- Progress Bar -->
    <div class="container mt-4">
        <div class="progress">
            <div id="progressBar" class="progress-bar progress-bar" role="progressbar" style="width: 6%;" aria-valuenow="6" aria-valuemin="0" aria-valuemax="100"</div>
        </div>
    </div>
    
        <!-- Step 1: General Information -->
        <div id="step1" class="container mt-5">
            <h2>General Information</h2>
            <div class="form-group">
                <label for="location"><h5>Where do you live?</h5></label><br>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="location" value="England">
                    <label class="form-check-label">England</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="location" value="Wales">
                    <label class="form-check-label">Wales</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="location" value="Scotland">
                    <label class="form-check-label">Scotland</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="location" value="Northern Ireland">
                    <label class="form-check-label">Northern Ireland</label>
                </div>
            </div>
    
            <div class="form-group">
                <label for="relationship"><H5>What is your relationship status?</H5></label><br>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="relationship" value="Single">
                    <label class="form-check-label">Single</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="relationship" value="In a relationship">
                    <label class="form-check-label">In a relationship</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="relationship" value="Married">
                    <label class="form-check-label">Married</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="relationship" value="Civil">
                    <label class="form-check-label">In a civil partnership</label>
                </div>
                            <div class="form-check">
                    <input class="form-check-input" type="radio" name="relationship" value="Widowed">
                    <label class="form-check-label">Widowed</label>
                </div>
            </div>
    
            <button class="btn btn-primary" onclick="goToStep2()">Next</button>
        </div>
    </div>
    
        <!-- Step 2: Who Needs a Will -->
    <div id="step2" class="hidden container mt-5">
        <h5>Who needs a will?</h5>
        <div id="willOptions" class="form-group"></div>
        <br>
        <button class="btn btn-secondary" onclick="goToStep1()">Previous</button>
        <button class="btn btn-primary" onclick="goToStep3()">Next</button>
    </div>
    
        <!-- Step 3: Contact Information -->
    <div id="step3" class="hidden container mt-5">
        <h2>Contact Information</h2>
    
        <div class="form-group">
            <label for="email"><h5>What is your email address?</h5></label>
            <input type="email" class="form-control" id="email" placeholder="you@email.com">
        </div>
    
        <div class="form-group">
            <label for="fullName"><h5>What is your full name?</h5></label>
            <input type="text" class="form-control" id="firstName" placeholder="First and middle names">
            <input type="text" class="form-control mt-2" id="lastName" placeholder="Last name">
        </div>
    
        <div class="form-group">
            <label for="address"><h5>What is your home address?</h5></label>
            <input type="text" class="form-control" id="address1" placeholder="Address line 1">
            <input type="text" class="form-control mt-2" id="address2" placeholder="Address line 2">
            <input type="text" class="form-control mt-2" id="city" placeholder="Town/City">
            <input type="text" class="form-control mt-2" id="postcode" placeholder="Postcode">
        </div>
    
        <button class="btn btn-secondary" onclick="goToStep2()">Previous</button>
        <button class="btn btn-primary" onclick="goToStep4()">Next</button>
    </div>
    
        <!-- Step 4: Asset Overview -->
    <div id="step4" class="hidden container mt-5">
        <h2>Asset Overview</h2>
    
        <!-- Question: Do you have any foreign assets? -->
        <div class="form-group">
            <label for="foreignAssets"><h5>Do you have any foreign assets?</h5></label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="foreignAssets" value="yes" onclick="showForeignAssetQuestion()">
                <label class="form-check-label">Yes</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="foreignAssets" value="no" onclick="hideForeignAssetQuestion()">
                <label class="form-check-label">No</label>
            </div>
        </div>
    
        <!-- Additional Question: Do you want to include your foreign assets in this will? -->
        <div id="foreignAssetInclude" class="form-group hidden">
            <label for="includeForeignAssets"><h5> Do you want to include your foreign assets in this will?</h5></label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="includeForeignAssets" value="yes">
                <label class="form-check-label">Yes</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="includeForeignAssets" value="no">
                <label class="form-check-label">No</label>
            </div>
        </div>
    
        <!-- Navigation Buttons -->
        <button class="btn btn-secondary" onclick="goToStep3()">Previous</button>
        <button class="btn btn-primary" onclick="goToStep5()">Next</button>
    </div>
    
        <!-- Step 5: Beneficiaries and Gifts -->
    <div id="step5" class="hidden container mt-5">
        <h2>Beneficiaries and Gifts</h2>
    
        <!-- Beneficiary Section -->
        <div class="form-group">
            <label for="beneficiaries"><h5>Who do you want to receive a gift or share of your estate?</h5></label><br>
            <div id="beneficiaryList"></div> <!-- Dynamically populated by JS -->
            <button class="btn btn-outline-primary mt-2" onclick="addBeneficiary()">Add Beneficiary</button>
        </div>
    
        <!-- Charities Section -->
        <div class="form-group mt-4">
            <label for="charities"><h5>Do you want to include any charities? (optional)</h5></label><br>
             <div id="charityList" class="mt-2"></div>
            <button class="btn btn-outline-primary" onclick="addCharity()">Add a New Charity</button>
        </div>
    
        <!-- Navigation Buttons -->
        <div class="mt-4">
            <button class="btn btn-secondary" onclick="goToStep4()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep6()">Next</button>
        </div>
    </div>
    
        <!-- Step 6: Specific Gifts or Donations -->
    <div id="step6" class="hidden container mt-5">
        <h5>Do You Want to Leave Specific Gifts or Donations?</h5>
    
        <!-- Gift Recipient List (Dynamically Populated by JS) -->
        <div id="giftRecipientList"></div>
    
        <!-- Navigation Buttons -->
        <div class="mt-4">
            <button class="btn btn-secondary" onclick="goToStep5()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep7()">Next</button>
        </div>
    </div>
    
        <!-- Step 7: Division of Residual Estate -->
    <div id="step7" class="hidden container mt-5">
            <h2 class="mt-4">Division of Residual Estate</h2>
    
            <div id="residualEstateDivisionList"></div> <!-- Dynamically show names for residual estate division -->
            <label for="totalPercentage">Total Percentage:</label>
            <input type="text" id="totalPercentage" readonly value="0%"><!-- Display total percentage -->
            
            <br><br>
            <p id="percentageError" class="hidden" style="color:red;">Total must add up to 100%</p> <!-- Error message -->
            <button class="btn btn-secondary" onclick="goToStep6()">Previous Page</button>
            <button class="btn btn-primary" onclick="validatePercentage()">Next Page</button> <!-- Validate percentage before moving -->
        </div>
    
        <!-- Step 8: Contingency Planning -->
    <div id="step8" class="hidden container mt-5">
        <h2 class="mb-4">Contingency Planning</h2>
        <h5>If one of the following beneficiaries dies before you, what should happen to their gifts and share of your inheritance?</h5>
    
        <div id="contingencyList" class="mb-4"></div> <!-- This is where the beneficiaries will be dynamically inserted -->
    
        <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" onclick="goToStep7()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep9()">Next</button>
        </div>
    </div>
        
        <!-- Step 9: Executors -->
    <div id="step9" class="hidden container mt-5">
        <h2>Executors</h2>
        <label for="executor">Who do you want to appoint as executor?</label><br>
        <div id="executorList"></div> <!-- This is dynamically populated with Swiftwills, beneficiaries, or new executor -->
        <button class="btn btn-secondary" onclick="goToStep8()">Previous</button>
        <button class="btn btn-primary" onclick="goToStep10()">Next</button>
    </div>
    
        <!-- Step 10: Children and Guardianship -->
    <div id="step10" class="hidden container mt-5">
        <h2 class="mb-4">Children and Guardianship</h2>
    
        <!-- Question 1: Do you have children under 18? -->
        <div class="mb-3">
            <label class="form-label">Do you have any children under 18?</label><br>
            <div class="form-check">
                <input type="radio" class="form-check-input" name="hasChildren" value="yes" onclick="showChildrenFields()" id="childrenYes">
                <label class="form-check-label" for="childrenYes">Yes</label><br>
                <input type="radio" class="form-check-input" name="hasChildren" value="no" onclick="hideChildrenFields()" id="childrenNo">
                <label class="form-check-label" for="childrenNo">No</label><br>
            </div>
        </div>
    
        <!-- Children-related fields (hidden by default) -->
        <div id="childrenFields" class="hidden">
    
            <!-- Question 2: Executors manage inheritance? -->
            <div class="mb-3">
                <label class="form-label">Do you want your executors to manage their inheritance until they turn 18?</label><br>
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="manageInheritance" value="yes" onclick="showExecutorFields()" id="manageInheritanceYes">
                    <label class="form-check-label" for="manageInheritanceYes">Yes</label><br>
                    <input type="radio" class="form-check-input" name="manageInheritance" value="no" onclick="hideExecutorFields()" id="manageInheritanceNo">
                    <label class="form-check-label" for="manageInheritanceNo">No</label><br>
                </div>
            </div>
    
            <!-- Executor-related fields (hidden by default) -->
            <div id="executorFields" class="hidden mb-3">
                <label class="form-label">Select any children under 18</label><br>
                <div id="childrenUnder18List" class="form-check">
                    <!-- Dynamically populated with beneficiary names from Step 5 -->
                </div>
            </div>
    
            <!-- Question 4: Appoint guardians -->
            <div class="mb-3">
                <label class="form-label">Do you want to appoint guardians in case a child is still under 18 when you pass away?</label><br>
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="appointGuardians" value="yes" onclick="showGuardianFields()" id="appointGuardiansYes">
                    <label class="form-check-label" for="appointGuardiansYes">Yes</label><br>
                    <input type="radio" class="form-check-input" name="appointGuardians" value="no" onclick="hideGuardianFields()" id="appointGuardiansNo">
                    <label class="form-check-label" for="appointGuardiansNo">No</label><br>
                    <!-- Guardian input fields (hidden by default) -->
            <div id="guardianFields" class="hidden mb-3">
                <div id="guardianList" class="form-group">
                    <!-- Multiple guardians can be added here dynamically -->
                </div>
                <button class="btn btn-outline-primary" onclick="addGuardian()">Add Another Guardian</button><br><br>
            </div>
        </div>
                </div>
            </div>
    
            
    
        <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" onclick="goToStep9()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep11()">Next</button>
        </div>
    </div>
        
        <!-- Step 11: Pets -->
    <div id="step11" class="hidden container mt-5">
        <h2 class="mb-4">Pets</h2>
    
        <!-- Question 1: Do you have any pets? -->
        <div class="mb-3">
            <label class="form-label">Do you have any pets?</label>
            <div class="form-check">
                <input type="radio" class="form-check-input" name="hasPets" value="yes" onclick="showPetFields()" id="petsYes">
                <label class="form-check-label" for="petsYes">Yes</label><br>
                <input type="radio" class="form-check-input" name="hasPets" value="no" onclick="hidePetFields()" id="petsNo">
                <label class="form-check-label" for="petsNo">No</label><br>
            </div>
        </div>
    
        <!-- Pet-related fields (hidden by default) -->
        <div id="petFields" class="hidden">
            <!-- Question 2: Who will take care of the pets? -->
            <div class="mb-3">
                <label class="form-label">Who do you want to take care of your pets?</label>
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="petCaretaker" value="executors" onclick="hideAdditionalExecutorFields()" id="caretakerExecutors">
                    <label class="form-check-label" for="caretakerExecutors">My executors</label><br>
                    <input type="radio" class="form-check-input" name="petCaretaker" value="someoneElse" onclick="showAdditionalExecutorFields()" id="caretakerSomeoneElse">
                    <label class="form-check-label" for="caretakerSomeoneElse">Someone else</label>
                </div>
            </div>
    
            <!-- Additional caretaker fields for "Someone else" (hidden by default) -->
            <div id="additionalPetCaretaker" class="hidden mb-3">
                <label for="petCaretakerFullName" class="form-label"></label>
                <input type="text" name="petCaretakerFullName" placeholder="Full name" class="form-control"><br>
    
                <label for="petCaretakerRelationship" class="form-label"></label>
                <select name="petCaretakerRelationship" class="form-select">
                    <option value="Select">Relationship</option>
                    <option value="Spouse">Spouse</option>
                    <option value="Civil partner">Civil partner</option>
                    <option value="Partner">Partner</option>
                    <option value="Mother">Mother</option>
                    <option value="Father">Father</option>
                    <option value="Daughter">Daughter</option>
                    <option value="Son">Son</option>
                    <option value="Grandson">Grandson</option>
                    <option value="Granddaughter">Granddaughter</option>
                    <option value="Great grandson">Great grandson</option>
                    <option value="Great granddaughter">Great granddaughter</option>
                    <option value="Niece">Niece</option>
                    <option value="Nephew">Nephew</option>
                    <option value="Friend">Friend</option>
                    <option value="Other">Other</option>
                </select><br>
    
                <label for="petCaretakerAddress" class="form-label"></label>
                <input type="text" name="petCaretakerAddress" placeholder="Address or city" class="form-control">
            </div>
    
            <!-- Question 3: Leave money for pet care? -->
            <div class="mb-3">
                <label class="form-label">Do you want to leave money to help with the care of your pets?</label>
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="leaveMoneyForPets" value="yes" onclick="showLeaveMoneyAmount()" id="leaveMoneyYes">
                    <label class="form-check-label" for="leaveMoneyYes">Yes</label><br>
                    <input type="radio" class="form-check-input" name="leaveMoneyForPets" value="no" onclick="hideLeaveMoneyAmount()" id="leaveMoneyNo">
                    <label class="form-check-label" for="leaveMoneyNo">No</label>
                </div>
            </div>
    
            <!-- Leave money amount input (hidden by default) -->
            <div id="leaveMoneyAmount" class="hidden mb-3">
                <label for="petMoneyAmount" class="form-label"></label>
                <input type="number" name="petMoneyAmount" class="form-control" placeholder="Enter amount"><br>
            </div>
        </div>
    
        <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" onclick="goToStep10()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep12()">Next</button>
        </div>
    </div>
    
        <!-- Step 12: Digital Assets -->
    <div id="step12" class="hidden container mt-5">
        <h2 class="mb-4">Digital Assets</h2>
    
        <div class="mb-3">
            <label class="form-label">Do you want to allow your executor to deal with your digital assets?</label><br>
            <div class="form-check">
                <input type="radio" class="form-check-input" name="allowDigitalAssets" value="yes" id="digitalAssetsYes">
                <label class="form-check-label" for="digitalAssetsYes">Yes</label><br>
                <input type="radio" class="form-check-input" name="allowDigitalAssets" value="no" id="digitalAssetsNo">
                <label class="form-check-label" for="digitalAssetsNo">No</label><br><br>
            </div>
        </div>
    
        <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" onclick="goToStep11()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep13()">Next</button>
        </div>
    </div>
    
        <!-- Step 13: Funeral Plans -->
    <div id="step13" class="hidden container mt-5">
        <h2 class="mb-4">Funeral Plans</h2>
    
        <div class="mb-3">
            <label class="form-label">What do you want to happen to your body?</label><br>
            <div class="form-check">
                <input type="radio" class="form-check-input" name="funeralPlan" value="Cremation" id="funeralCremation">
                <label class="form-check-label" for="funeralCremation">Cremation</label><br>
                <input type="radio" class="form-check-input" name="funeralPlan" value="Burial" id="funeralBurial">
                <label class="form-check-label" for="funeralBurial">Burial in a cemetery</label><br>
                <input type="radio" class="form-check-input" name="funeralPlan" value="Natural burial" id="funeralNatural">
                <label class="form-check-label" for="funeralNatural">Natural burial</label><br>
                <input type="radio" class="form-check-input" name="funeralPlan" value="Donate to science" id="funeralScience">
                <label class="form-check-label" for="funeralScience">Donate to science</label><br>
                <input type="radio" class="form-check-input" name="funeralPlan" value="Family decide" id="funeralFamily">
                <label class="form-check-label" for="funeralFamily">Let my family decide</label><br><br>
            </div>
        </div>
    
        <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" onclick="goToStep12()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep14()">Next</button>
        </div>
    </div>
    
        <!-- Step 14: Delivery -->
    <div id="step14" class="hidden container mt-5">
        <h2 class="mb-4">Delivery</h2>
    
        <div class="mb-3">
            <label class="form-label">How would you like to get your will?</label><br>
            <div class="form-check">
                <input type="radio" class="form-check-input" name="deliveryMethod" value="digitalDownload" id="deliveryDigital">
                <label class="form-check-label" for="deliveryDigital">Digital download</label><br>
                <input type="radio" class="form-check-input" name="deliveryMethod" value="1stClassPost" id="delivery1stClass">
                <label class="form-check-label" for="delivery1stClass">1st class post delivery</label><br>
                <input type="radio" class="form-check-input" name="deliveryMethod" value="priorityReview" id="deliveryPriority">
                <label class="form-check-label" for="deliveryPriority">Priority review & post delivery</label><br><br>
            </div>
        </div>
    
        <div class="d-flex justify-content-between">
            <button class="btn btn-secondary" onclick="goToStep13()">Previous</button>
            <button class="btn btn-primary" onclick="goToStep15()">Next</button>
        </div>
    </div>
    
        <!-- Step 15: Review Page -->
    <div id="step15" class="hidden container mt-5">
        <h2>Review Your Information</h2>
    
        <!-- General Information Review -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">About You</h5>
                <p id="reviewGeneralInfo"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep1()">Edit</button>
            </div>
        </div>
    
        <!-- Gifts Section -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Gifts</h5>
                <p id="reviewGifts"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep5()">Edit</button>
            </div>
        </div>
    
        <!-- Residuary Estate Section -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Residuary Estate</h5>
                <p id="reviewResiduaryEstate"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep7()">Edit</button>
            </div>
        </div>
    
        <!-- Executors Section -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Executors</h5>
                <p id="reviewExecutors"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep9()">Edit</button>
            </div>
        </div>
    
        <!-- Children Section -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Children</h5>
                <p id="reviewChildren"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep10()">Edit</button>
            </div>
        </div>
    
        <!-- Pets Section -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Pets</h5>
                <p id="reviewPets"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep11()">Edit</button>
            </div>
        </div>
    
        <!-- Digital Assets Section -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Digital Assets</h5>
                <p id="reviewDigitalAssets"></p>
                <button class="btn btn-outline-primary btn-sm" onclick="goToStep12()">Edit</button>
            </div>
        </div>
        
        <!-- Right Column: Submission Instructions -->
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>Your will is ready to be checked.</h5>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check"></i> Pay securely</li>
                            <li><i class="fas fa-check"></i> We write your will based on your answers</li>
                            <li><i class="fas fa-check"></i> Receive your will via 1st Class post</li>
                        </ul>
                        <button class="btn btn-success btn-block" onclick="submitForm()">Send for review <i class="fas fa-arrow-right"></i></button>
                    </div>
    
        <!-- Submit Button -->
        <div class="text-center">
            <button class="btn btn-success btn-lg" onclick="submitForm()">Submit Your Will</button>
        </div>
    </div>
    
    </body>
    </html>